<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:t="http://www.tei-c.org/ns/1.0" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><title>Comment la TEI utilise ODD</title><meta name="generator" content="Generated by TEISLIDY stylesheet"></meta><script src="https://www.w3.org/Talks/Tools/Slidy/slidy.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" media="screen, projection" href="https://www.w3.org/Talks/Tools/Slidy/show.css"></link><link href="../css/egXMLhandling.css" rel="stylesheet" type="text/css"></link><link href="../css/tei.css" rel="stylesheet" type="text/css"></link></head><body class="simple" id="TOP"><div class="slide cover"><img src="media/logo.jpg" width="40%" style="float:left" alt="[Put logo here]" class="cover"></img><br clear="all"></br><h1>Comment la TEI utilise ODD</h1><p>Lou Burnard Consulting</p></div><div class="slide"><h2>TEI ODD sous le capot</h2><p>La TEI s’exprime en langage ODD. Ce fut d’ailleurs la raison principale pour laquelle le langage fut inventé </p><p>La source TEI P5 (disponible ici <a class="link_ptr" href="http://www.tei-c.org/release/xml/tei/odd/Source/"><span>http://www.tei-c.org/release/xml/tei/odd/Source/</span></a>) rassemble&nbsp;: </p><ul><li class="item">39 fichiers en TEI-XML, dont 25 contiennent un chapitre de documentation en XML-TEI, la plupart définissant un module, par exemple <span class="ident">PH-PrimarySources.xml</span></li><li class="item">778 fichiers en TEI-XML, chacun définissant un élément, une classe, ou une macro <ul><li class="item">29 datatypes (<code>data.xxxx</code>) par ex. <span class="ident">tei.sex.xml</span></li><li class="item">116 classes de type modèle (code&gt;model.xxxx) par ex. <span class="ident">model.biblLike.xml</span></li><li class="item">71 classes de type attribut (<code>att.xxxx</code>) par ex. <span class="ident">att.divLike.xml</span></li><li class="item">8 macros (macro.xxxx) par ex. <span class="ident">macro.phraseSeq.xml</span></li><li class="item">555 spécifications d’éléments de <span class="ident">ab.xml</span> jusqu'à <span class="ident">zone.xml</span></li></ul></li></ul><p class="box">Nous allons regarder cela de plus près…</p></div><div class="slide"><h2>Organisation physique des <span class="titlem">Guidelines</span></h2><p>Il ne faut pas confondre l’organisation physique (en fichiers) avec l’organisation logique (en spécifications, etc.)</p><ul><li class="item">Le fichier <span class="ident">guidelines-XX.xml</span> est ‘la’ source primaire des <span class="titlem">Guidelines</span> pour la langue XX.</li><li class="item">Mis à part quelques liminaires (une en-tête TEI, la page de titre, etc.), il contient plusieurs lignes comme ceci&nbsp;: <code>&lt;include xmlns="http://www.w3.org/2001/XInclude" href="Guidelines/en/HD-Header.xml"/&gt; </code></li><li class="item">Au sein de chaque chapitre, on trouve des <code>xInclude</code> similaires pour les objets définis par ce chapitre.</li></ul></div><div class="slide"><h2>Organisation logique des <span class="titlem">Guidelines</span></h2><ul><li class="item">À la fin de chaque chapitre définissant un module, il y a (par convention) un élément <span class="gi">&lt;moduleSpec&gt;</span> qui rassemble toutes les spécifications référencées par le chapitre pour définir un module</li><li class="item">Ces spécifications sont organisées (par commodité) en <span class="gi">&lt;specGrp&gt;</span>, qui sont ensuite référencées par un <span class="gi">&lt;specGrpRef&gt;</span></li><li class="item">Chaque <span class="gi">&lt;specGrp&gt;</span> regroupe des spécifications d’objet, indiqué par un <code>xInclude</code></li></ul></div><div class="slide"><h2>Par exemple…</h2><p>Cette partie de texte des Guidelines&nbsp;:</p><div class="figure"><img src="images/ft-1.png" alt="" class="graphic"></img></div><div class="p">est généré à partir des lignes de code suivantes&nbsp;: <div id="index.xml-egXML-d30e146" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;div&gt;</span>
&nbsp;<span class="element">&lt;head&gt;</span>Module for Tables, Formulæ, Notated Music, and Graphics<span class="element">&lt;/head&gt;</span>
&nbsp;<span class="element">&lt;p&gt;</span>The module described in this chapter provides the following features:
&nbsp;<span class="element">&lt;moduleSpec&nbsp;<span class="attribute">xml:id</span>="<span class="attributevalue">DFTFF</span>"
&nbsp;&nbsp;&nbsp;<span class="attribute">ident</span>="<span class="attributevalue">figures</span>"&gt;</span>
&nbsp;&nbsp;&nbsp;<span class="element">&lt;desc&gt;</span>Tables, formulæ, notated music, and figures<span class="element">&lt;/desc&gt;</span>
&nbsp;&nbsp;&nbsp;<span class="element">&lt;desc&nbsp;<span class="attribute">xml:lang</span>="<span class="attributevalue">fr</span>"&gt;</span>Tableaux, formules et graphiques<span class="element">&lt;/desc&gt;</span>
<span class="comment">&lt;!-- ... --&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;/moduleSpec&gt;</span> The selection and combination of modules to form a TEI schema is
&nbsp;&nbsp; described in <span class="element">&lt;ptr&nbsp;<span class="attribute">target</span>="<span class="attributevalue">#STIN</span>"/&gt;</span>.
&nbsp;<span class="element">&lt;specGrpRef&nbsp;<span class="attribute">target</span>="<span class="attributevalue">#DFTTAB</span>"/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;specGrpRef&nbsp;<span class="attribute">target</span>="<span class="attributevalue">#DFTFOR</span>"/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;specGrpRef&nbsp;<span class="attribute">target</span>="<span class="attributevalue">#DFTNTM</span>"/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;specGrpRef&nbsp;<span class="attribute">target</span>="<span class="attributevalue">#DFTGRA</span>"/&gt;</span>
&nbsp;<span class="element">&lt;/p&gt;</span>
<span class="element">&lt;/div&gt;</span></div></div></div><div class="slide"><h2>Les pointers (#DFTTAB etc.) indiquent des <span class="term">specGrp</span>, comme ceci …</h2><div id="index.xml-egXML-d30e172" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;specGrp&nbsp;<span class="attribute">xml:id</span>="<span class="attributevalue">DFTTAB</span>"&nbsp;<span class="attribute">n</span>="<span class="attributevalue">Tables</span>"&gt;</span> 
 &lt;include href="../../Specs/table.xml"/&gt;
 &lt;include href="../../Specs/row.xml"/&gt;
 &lt;include href="../../Specs/cell.xml"/&gt;
<span class="element">&lt;/specGrp&gt;</span></div><p>et le xInclude apporte la specification elle meme d’un <span class="term">objet</span>, par ex :</p><div id="index.xml-egXML-d30e180" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;elementSpec&nbsp;<span class="attribute">module</span>="<span class="attributevalue">figures</span>"&nbsp;<span class="attribute">ident</span>="<span class="attributevalue">cell</span>"&gt;</span>
&nbsp;<span class="element">&lt;gloss&nbsp;<span class="attribute">versionDate</span>="<span class="attributevalue">2007-06-12</span>"
&nbsp;&nbsp;<span class="attribute">xml:lang</span>="<span class="attributevalue">fr</span>"&nbsp;<span class="attribute">type</span>="<span class="attributevalue">slide</span>"&gt;</span>cellule<span class="element">&lt;/gloss&gt;</span>
&nbsp;<span class="element">&lt;desc&nbsp;<span class="attribute">versionDate</span>="<span class="attributevalue">2005-01-14</span>"
&nbsp;&nbsp;<span class="attribute">xml:lang</span>="<span class="attributevalue">en</span>"&gt;</span>contains one cell of à table.<span class="element">&lt;/desc&gt;</span>
<span class="comment">&lt;!-- ... --&gt;</span>
<span class="element">&lt;/elementSpec&gt;</span></div></div><div class="slide"><h2>De quels types d’objet s’agit-il&nbsp;?</h2><ul><li class="item">types de données (<span class="ident">datatypes</span>)</li><li class="item">classes de modèle (<span class="ident">model classes</span>)</li><li class="item">classes d’attribut (<span class="ident">attribute classes</span>)</li><li class="item"><span class="ident">macros</span></li><li class="item">… et éléments</li></ul><p class="box">Nous allons détailler un exemple de chacun de ces objets …</p></div><div class="slide"><h2>Une spécification ODD</h2><p class="box">Ouvrez <span class="ident">teidata.pointer.xml</span> avec oXygen</p><p>Comme tout autre spécification TEI…</p><ul><li class="item">C’est un document XML, à valider contre le schéma spécifié </li><li class="item">Avec deux licences open source</li><li class="item">Il y a une description (<span class="gi">&lt;desc&gt;</span>) répétée en plusieurs langues, chacune identifiée par <span class="att">xml:lang</span> et avec une <span class="att">versionDate</span></li><li class="item">La spécification est dotée d’un identifiant, fourni par l’attribut <span class="att">ident</span>), et appartient à un module (<span class="att">module</span>)</li><li class="item">Les remarques (<span class="gi">&lt;remarks&gt;</span>) sont plurilingues de la même manière que les <span class="gi">&lt;desc&gt;</span></li></ul></div><div class="slide"><h2>Spécification d’un datatype</h2><p>La signification d'un datatype est indiquée par son <span class="gi">&lt;content&gt;</span> Cet élément peut contenir : </p><ul><li class="item">soit un élément <span class="gi">&lt;dataRef&gt;</span> soit un element <span class="gi">&lt;valList&gt;</span></li><li class="item">un <span class="gi">&lt;dataRef&gt;</span> peut indiquer un type de donnée en utilisant un attribut <span class="att">name</span> attribute (type défini par XSD) ou un attribut <span class="att">key</span> (type défini par un élément <span class="gi">&lt;dataSpec&gt;</span>)</li><li class="item">un <span class="gi">&lt;valList&gt;</span> fournit une liste de <span class="gi">&lt;valItem&gt;</span>s, chacun définissant une valeur encodée.</li></ul></div><div class="slide"><h2>D’autres formes de spécification de datatype</h2><p class="box">Ouvrez <span class="ident">teidata.certainty.xml</span> avec oXygen</p><ul><li class="item">Dans ce cas, la liste de valeurs possibles (dans <span class="gi">&lt;content&gt;</span> ) est fermée</li><li class="item">Les attributs utilisant ce datatype seront limités aux valeurs indiquées</li></ul><p class="box">Ouvrez <span class="ident">teidata.probCert.xml</span> avec oXygen</p><ul><li class="item">Dans ce cas, le <span class="gi">&lt;content&gt;</span> propose une choix entre deux éléments <span class="gi">&lt;dataRef&gt;</span></li><li class="item">Les attributs utilisant ce datatype peuvent avoir soit une des valeurs proposés pour <span class="ident">teidata.certainty</span>, soit une valeur indiquée par l'element <span class="gi">&lt;content&gt;</span> de <span class="ident">teidata.probability</span> (à savoir, un nombre réel entre 0 et 1)</li></ul></div><div class="slide"><h2>Spécification d’une classe modèle</h2><p class="box">Ouvrez <span class="ident">model.biblLike.xml</span> avec oXygen</p><ul><li class="item">La spécification d’une classe modèle n’existe que pour être pointée par d’autres spécifications, donc pas grand chose à voir ici</li><li class="item">Comme ailleurs, on se sert d’un élément <span class="gi">&lt;listRef&gt;</span> pour regrouper des pointeurs sur la partie des Guidelines où cette classe est décrite.</li><li class="item">Notez l’élément <span class="gi">&lt;classes&gt;</span>&nbsp;: cette classe est réferencée par ("member of") d’autres classes modèles (<span class="ident">model.inter</span>, etc.). Une référence à la classe model.inter implique donc une référence à cette classe.</li><li class="item">Pour voir l’effet de cette hiérarchie de classes, regardez <a class="link_ref" href="http://www.tei-c.org/release/doc/tei-p5-doc/fr/html/ref-model.biblLike.html">la visualisation de cette spécification</a></li></ul></div><div class="slide"><h2>Spécification d’une classe d’attribut</h2><p class="box">Ouvrez <span class="ident">att.divLike.xml</span> avec oXygen</p><ul><li class="item">On vous recommande d’ouvrir la vue Sommaire (Fenêtre-&gt;Afficher la vue-&gt;Sommaire) si besoin est pour visualiser la structure</li><li class="item">La liste des attributs fournis par cette classe est specifiée dans un <span class="gi">&lt;attList&gt;</span>, qui contient deux <span class="gi">&lt;attDef&gt;</span> (<span class="att">org</span> et <span class="att">uniform</span>)</li><li class="item">les valeurs disponibles pour un attribut sont spécifiés par un <span class="gi">&lt;datatype&gt;</span> et éventuellement un <span class="gi">&lt;valList&gt;</span>, qui rassemblent chaque valeur prévue avec sa définition</li><li class="item">Cette classe est un sous-classe de deux autres (<span class="ident">att.metrical</span>, et <span class="ident">att.fragmentable</span>)&nbsp;: si ces classes sont disponibles, les attributs qu’elles fournissent seront donc également disponibles.</li></ul></div><div class="slide"><h2>Spécification d’un élément</h2><p class="box">Ouvrez <span class="ident">abstract.xml</span> avec oXygen</p><ul><li class="item">C’est un élément assez récent (révisé le 2012-12-27) donc il n’y aucune traduction de sa <span class="gi">&lt;desc&gt;</span> etc. Les parties essentielles d’un <span class="gi">&lt;elementSpec&gt;</span> sont donc plus évidents.</li><li class="item">Les attributs <span class="att">module</span> et <span class="att">ident</span></li><li class="item">l’élément <span class="gi">&lt;classes&gt;</span> qui précise les classes auxquelles cet élément appartient</li><li class="item">l’élément <span class="gi">&lt;content&gt;</span> qui précise le modèle de contenu de cet élément</li><li class="item">l’élément <span class="gi">&lt;exemplum&gt;</span> qui contient un exemple de l’usage de l’élément</li><li class="item">facultativement&nbsp;: des remarques (<span class="gi">&lt;remarks&gt;</span> et des renvois (<span class="gi">&lt;listRef&gt;</span>)</li></ul></div><div class="slide"><h2>Les classes TEI</h2><p class="att">Si on ne comprend pas le système de classes TEI, on aura du mal à comprendre le fonctionnement d’un ODD </p><ul><li class="item">une classe d’attribut comme <span class="ident">att.global</span> fournit des attributs</li><li class="item">une classe de modélisation comme <span class="ident">model.profileDescPart</span> regroupe des éléments selon leur sémantique, ou leur possibilités de positionnement&nbsp;: <ul><li class="item">model.xxxLike&nbsp;: resemble à un xxx</li><li class="item">model.xxxPart&nbsp;: constitue un xxx</li></ul></li><li class="item">toute classe peut hériter ses propriétés d’une autre</li><li class="item">on se sert des classes de modélisation surtout dans les définitions de contenu, ce qui permet de les gérer avec une couche d’indirection</li></ul></div><div class="slide"><h2>Par exemple</h2><div id="index.xml-egXML-d30e482" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;classes&gt;</span>
&nbsp;<span class="element">&lt;memberOf&nbsp;<span class="attribute">key</span>="<span class="attributevalue">att.global</span>"/&gt;</span>
&nbsp;<span class="element">&lt;memberOf&nbsp;<span class="attribute">key</span>="<span class="attributevalue">att.responsibility</span>"/&gt;</span>
&nbsp;<span class="element">&lt;memberOf&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.profileDescPart</span>"/&gt;</span>
<span class="element">&lt;/classes&gt;</span></div><ul><li class="item">étant membre de <span class="ident">model.profileDescPart</span>, <span class="gi">&lt;abstract&gt;</span> peut apparaitre dans <span class="gi">&lt;profileDesc&gt;</span> parce que le contenu de <span class="gi">&lt;profileDesc&gt;</span> est <div id="index.xml-egXML-d30e502" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.profileDescPart</span>"
&nbsp;<span class="attribute">maxOccurs</span>="<span class="attributevalue">unbounded</span>"/&gt;</span></div></li><li class="item">en tant que membre de <span class="ident">att.responsibility</span>, il hérite des attributs <span class="att">cert</span> et <span class="att">resp</span></li><li class="item"><span class="ident">att.responsibility</span> lui transmet également l’attribut <span class="att">source</span>, parce qu'elle est ‘memberOf’ de la classe <span class="ident">att.source</span></li></ul></div><div class="slide"><h2>Définition du contenu d’un élément</h2><p>L'element <span class="gi">&lt;content&gt;</span> peut contenir:</p><ul><li class="item"><span class="gi">&lt;elementRef&gt;</span> : un element</li><li class="item"><span class="gi">&lt;classRef&gt;</span> une classe d'element</li><li class="item"><span class="gi">&lt;macroRef&gt;</span> reference a un patron</li><li class="item"><span class="gi">&lt;textNode&gt;</span> un morceau de texte</li><li class="item"><span class="gi">&lt;anyElement&gt;</span> : un element non-specifie</li></ul><p>Regroupé par :</p><ul><li class="item"><span class="gi">&lt;alternate&gt;</span> une alternation</li><li class="item"><span class="gi">&lt;sequence&gt;</span> une séquence</li></ul><p>Tous sous contrôle des attributs <span class="att">minOccurs</span> et <span class="att">maxOccurs</span> en ce qui concerne leurs fréquences d'occurence</p></div><div class="slide"><h2>Par exemple ...</h2><div id="index.xml-egXML-d30e579" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;content&gt;</span>
&nbsp;<span class="element">&lt;alternate&nbsp;<span class="attribute">maxOccurs</span>="<span class="attributevalue">unbounded</span>"&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.pLike</span>"/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.listLike</span>"/&gt;</span>
&nbsp;<span class="element">&lt;/alternate&gt;</span>
<span class="element">&lt;/content&gt;</span></div><div class="q">Un ou plusieurs éléments membres des classes <span class="ident">model.pLike</span> ou bien <span class="ident">model.listLike</span></div><div id="index.xml-egXML-d30e592" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;content&gt;</span>
&nbsp;<span class="element">&lt;sequence&nbsp;<span class="attribute">maxOccurs</span>="<span class="attributevalue">unbounded</span>"&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.pLike</span>"/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.listLike</span>"/&gt;</span>
&nbsp;<span class="element">&lt;/sequence&gt;</span>
<span class="element">&lt;/content&gt;</span></div><div class="q">Une ou plusieurs répétitions d'un élément de la classe <span class="ident">model.pLike</span> suivi d'un élément de la classe <span class="ident">model.listLike</span></div></div><div class="slide"><h2>Exemples</h2><p>l'élément <span class="gi">&lt;egXML&gt;</span> est utilisé partout dans les <span class="titlem">Guidelines</span> pour fournir des exemples d'usage directement en XML-TEI. Pour permettre à une validation du contenu de cet élément il est associé avec une autre espace de nommage.</p><div class="p">Par exemple :<div id="index.xml-egXML-d30e619" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely-->&lt;egXML xmlns="http://www.tei-c.org/ns/Examples"&gt;
<span class="element">&lt;p&gt;</span>Je ne suis pas un p comme les autres<span class="element">&lt;/p&gt;</span>
 &lt;/egXML&gt;</div></div><p>Oui, c'est une astuce.</p></div><div class="slide"><h2>Contraintes schematron</h2><ul><li class="item">Une spécification d’élément peut aussi contenir un élément <span class="gi">&lt;constraintSpec&gt;</span> (ou plusieurs), rassemblant des règles exprimées en ISO schematron</li><li class="item">La TEI s’en sert pour exprimer des contraintes additionnelles non exprimables autrement, par exemple des contraintes contextuelles ou concurrentielles</li><li class="item">Le traitement de ces règles nécessite une étape additionnelle dans la validation des documents</li><li class="item">La version courante d’oXygen effectue cela automatiquement, pourvu que votre schéma s'exprime en RELAXNG et vos contraintes s’expriment en ISO schematron.</li></ul></div><div class="slide"><h2>Exemple de schematron</h2><p class="box">Ouvrez <span class="ident">span.xml</span> avec oXygen</p><ul><li class="item">cette spécification comporte plusieurs <span class="gi">&lt;constraintSpec&gt;</span>, chacun avec son <span class="att">ident</span> et son <span class="att">scheme</span></li><li class="item">un ou plusieurs <span class="gi">&lt;constraint&gt;</span> sont possibles</li><li class="item">la contrainte s’exprime en langue ISO schematron, donc dans un autre espace de noms</li><li class="item">par ex. <code>if @to is supplied on &lt;name/&gt;, @from must be supplied as well</code> (NB <code>&lt;name/&gt;</code> signifie le nom de l’élément qui activera cette règle)</li></ul><p>Nous reviendrons sur ce sujet plus loin…</p></div><div class="slide"><h2>Spécification d’une macro</h2><p class="box">Ouvrez <span class="ident">macro.phraseSeq.xml</span> avec oXygen</p><ul><li class="item">Une macro, comme un datatype, fournit une abréviation conventionnelle pour des objets souvent utilisés&nbsp;; dans ce cas, un modèle de contenu.</li><li class="item">L’expansion d’une macro est fournie par un élément <span class="gi">&lt;content&gt;</span>.</li></ul><div id="index.xml-egXML-d30e694" class="pre egXML_valid"><!--This otherwise redundant comment ensures egXMLs format nicely--><span class="element">&lt;content&gt;</span>
&nbsp;<span class="element">&lt;alternate&nbsp;<span class="attribute">minOccurs</span>="<span class="attributevalue">0</span>"
&nbsp;&nbsp;<span class="attribute">maxOccurs</span>="<span class="attributevalue">unbounded</span>"&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;textNode/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.gLike</span>"/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.phrase</span>"/&gt;</span>
&nbsp;&nbsp;<span class="element">&lt;classRef&nbsp;<span class="attribute">key</span>="<span class="attributevalue">model.global</span>"/&gt;</span>
&nbsp;<span class="element">&lt;/alternate&gt;</span>
<span class="element">&lt;/content&gt;</span></div><div class="q">Rien du tout, du texte, ou n’importe combien d’éléments membres de n’importe laquelle des trois classes <span class="ident">model.gLike</span>, <span class="ident">model.phrase</span> ou <span class="ident">model.global</span></div></div></body></html>