<?xml version="1.0" encoding="UTF-8"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0">
   <teiHeader>
      <fileDesc>
         <titleStmt>
            <title>Best practice recommendations for long term archiving of TEI XML
               resources</title>
            <author xml:id="lou">Lou Burnard</author>
            <author>Nicolas Larrousse</author>
            <funder>TGIR Huma-Num</funder>
         </titleStmt>
         <publicationStmt>
            <p>Unpublished draft circulated for comment</p>
         </publicationStmt>
         <sourceDesc>
            <p>An original work: no pre-existing source</p>
         </sourceDesc>
      </fileDesc>
      <revisionDesc>
         <change who="#lou" when="2013-10-20">Started draft</change>
      </revisionDesc>
   </teiHeader>
   <text>
      <body>
         <div xml:id="intro">
            <head>Introduction</head>
            <p>This document arises out of a study commissioned by the TGIR Huma Num in
               collaboration with the CINES. <!-- expand these acronyms and add details -->
            </p>
            <p>The object of the study was to identify to promote best practice amongst the
               community of researchers wishing to deposit textual resources encoded using TEI XML
               with the CINES for long term preservation by formulating a series of precise
               recommendations, a Guide to Good Practice. Although the CINES already has extensive
               experience and expertise in the long term preservation of resources respecting
               generic standards such as XML and PDF, it was recognised that the increasing use of
               TEI-XML in the French research community offered both an additional opportunity and a
               challenge. On the one hand, as a more expressive and richer formalism than generic
               XML, TEI offers the possibility of ensuring the preservation of more contextual and
               semantic data forming part of a resource; on the other hand, the ways in which TEI
               XML is applied in practice varies quite widely amongst different researchers, and so
               simply to say that a document is "TEI-conformant" may leave unspecified a great deal
               of useful contextual information about it. </p>
            <p>Although the community of TEI users is highly divers, its members share an
               understanding of the best way to use the TEI Guidelines, just as those Guidelines
               express a common understanding of how the structure and metadata associated with a
               textual resource should be documented and defined. This community of practice has
               been increasing in size and scope quite significantly over the last few years, and
               notably so in France, where a number of large-scale resource-creation projects have
               already expressed a committment to the use of TEI XML, just as several smaller scale
               individual resource projects have adopted and adapted it to their needs. For the
               purposes of this project we approached initially only a small number of projects,
               selecting those which were known to be engaged in the creation of significant amounts
               of TEI-XML material likely to be of long-term interest in the scholarly research
               community. Examples included the Open Edition project (CLEO), which will publishes
               several hundred scholarly books in a TEI format over the next few years; the CNRTL,
               which has long been responsible for creation and distribution of a wide range of
               TEI-encoded language corpora and is a major French partner in CLARIN;
               <!-- some more examples here? --></p>
            <p>The usefulness of TEI-XML as a format for scholarly analysis and interchange is
               widely accepted. However the question arises as whether TEI-encoded resources are
               also suitable for long term preservation purposes : more specifically, if a project
               wishes to ensure long term preservation of its resources, should it archive them in a
               TEI format, or should it regard the TEI format simply as a means to an end, archiving
               only a processed form of the TEI source as HTML or PDF, for example? For projects
               where the TEI form is considered only as a means to the end of displaying the texts,
               this may well be adequate. But since TEI to HTML or TEI to PDF are lossy
               transformations, in which the added value constituted by TEI structural annotation is
               systematically removed this seems in general a less than optimal solution. We would
               like to be able to preserve our digital resources without loss of information, so as
               to facilitate future use of that information by means of technologies not yet in
               existence. Such data-independence was, after all, one of the promises XML (and before
               it SGML) offered.</p>
            <p>If then it is decided to preserve the original TEI XML sources, what other components
               (schema files, stylesheets, etc.) should accompany them when submitting them for long
               term preservation in a digital archive? TEI encoded resources typically contain
               mostly XML-encoded text, possibly with links to files expressed using other commonly
               encountered web formats for graphics or audio; is there advantage to be gained by
               treating them differently from any other XML encoded resource? When such resources
               are deposited in a digital archive, what tools and expertise will the archivist need
               to have available in order to ensure that they are valid and will continue to be
               usable? </p>
            <p> This study attempts to address these questions by providing (in section <ptr
                  target="#rex"/>) <list>
                  <item>recommendations for the data depositor, specifically about what documents
                     should accompany a resource to be archived ; </item>
                  <item>recommendations for the archiving services, specifically about what tools
                     may be used to validate TEI XML documents ; </item>
               </list></p>
            <p>A number of different scenarios are envisaged, depending on the technical expertise
               and other resources available to the depositor (and the archive). We provide some
               technical background on the technologies concerned in section <ptr target="#tech"/>
               below.</p>
            <!--
               A voir dans l’introduction ???
Références à d’autres pratiques et formats de fichiers 
Contextualisation exemple avec la Data Preservation Coalition  (UK) 
Prendre contact avec Text-Grid & Deutche Text Archive
-->
         </div>
         <div xml:id="rex">
            <head>Recommendations</head>
            <p>Our first recommendation concerns the <hi>provision of metadata</hi> about the
               source. All TEI-XML files include a component known as the <term>TEI Header</term>,
               which may be very elaborate and detailed, or entirely minimalist. For archival
               purposes, however, we think it may be helpful to propose a specific subset of
               information that should be supplied by the Header for every kind of language
               resource. A project may well supply more metadata than is suggested here; if it
               supplies less, then the description of the resource will be correspondingly weaker
               and less useful. The Archive will be expected to use only the elements specified here
               as the basis of its cataloguing of the resource. </p>
            <p>Our second recommendation concerns the <hi>validation of the source</hi>. We propose
               that depositors should as far as possible ensure that TEI-XML resources are
               accompanied by a file which accurately describes their encoding practices and
               purposes. The most appropriate format for this description would be the TEI-XML
               vocabulary commonly known as ODD, although producing documentation in this format is
               not as yet as well-understood or widely practiced within the TEI community as might
               be desired; a point to which we return below. Documentation in other forms,
               accompanied by validation schemas, are also useful, but they do not necessarily
               guarantee that the resources concerned will be TEI conformant. For this, an ODD is
               necessary. </p>
            <p>In the absence of ODD documentation from which a more appropriate schema may be
               derived, the only validation check possible before a resource can be accepted into
               the Archive will be against the generic TEI_All schema. According to the definition
               of TEI conformance, those parts of a document using the TEI namespace most be valid
               against the TEI All schema, which includes declarations for all possible TEI elements
               and attributes. </p>
            <p>Our third recommendation concerns the <hi>physical organization of the source</hi>. A
               TEI-XML resource is an XML document, the root element of which is either TEI or
               teiCorpus. However, that resource may well be stored in one or more files. Any XML
               document may embed or transclude other XML resources, for example, by use of the
               xInclude standard. A TEI-XML document may also transclude other non-XML documents
               such as graphics or audio. And a TEI XML document frequently references other XML
               documents, without however implying that they should be included in the source
               itself. </p>
         </div>
         <div xml:id="rex1">
            <head>Provision of Metadata</head>
            <p>A <gi>teiHeader</gi> element must be provided for each distinct <gi>TEI</gi> or
                  <gi>teiCorpus</gi> element in a resource. We recommend the following steps as part
               of the accession process: <list>
                  <item>Each header should be validated against a strict schema (to be supplied)
                     which will check the existence of required components listed below;</item>
                  <item>Each header will be modified, as a minimum to indicate that the header has
                     been validated for accession, and possibly also to indicate any significant
                     gaps found, as indicated below.</item>
               </list>
            </p>
            <p>Multiple <term>levels</term> of metadata may be provided in the case of a
                  <gi>teiCorpus</gi>. For example, some information may relate to the corpus as a
               whole (for example, its title, the purpose for which it was created, its distributor,
               etc); other information may relate only to individual components of it (for example,
               the bibliographic description of an individual source text), or to groups of such
               components (for example, a taxonomic classification).</p>
            <div xml:id="D1iden">
               <head>Corpus identification</head>
               <p>Under this heading we group information that identifies the resource, and
                  specifies the agencies responsible for its creation and distribution. <list>
                     <item>name of resource (<gi>title</gi> within <gi>titleStmt</gi>)
                        [required]</item>
                     <item>producer (<gi>respStmt</gi> within <gi>titleStmt</gi>). The agency
                        (individuals, research group, "principle investigator", company, institution
                        etc.) responsible for the intellectual content of the resource must be
                        specified. [required] </item>
                     <item>Information about any funding body or sponsor involved may also be
                        supplied using the <gi>funder</gi> element.</item>
                     <item> A <gi>publicationStmt</gi> is also required within the
                        <gi>fileDesc</gi>. If the resource has been formally published or
                        distributed, this will contain details of the agency (individual, research
                        group, company, institution etc) concerned; if not, it will contain text
                        stating that the resource has not been formally published. The following
                        elements may be used: <list>
                           <item>name of agency <gi>publisher</gi>, <gi>distributor</gi>
                           </item>
                           <item>contact details (postal address, email, telephone, fax)
                                 (<gi>pubPlace</gi>)</item>
                           <item>date first made available by this agency (<gi>date</gi>)</item>
                           <item>any specific identifier (e.g. a PURL or ISBN ) used for the
                              published version (<gi>idno</gi>)</item>
                           <item>information about access rights should be supplied within the
                              required <gi>availability</gi> element. This should explicitly
                              reference all applicable licences using the <gi>licence</gi> element
                              and may also indicate additional restrictions, e.g. where the corpus
                              may not be distributed in some geographic zones, or for some specific
                              purposes. </item>
                        </list></item>
                  </list></p>
            </div>
            <div xml:id="D1srce">
               <head>Source derivation</head>
               <p>Under this heading we group information that describes the sources from which the
                  resource was derived. </p>
               <p>TEI-XML resources may be derived from many different kinds of object. A
                     <gi>sourceDescription</gi> is required for each distinct source. Depending on
                  its nature, this will contain one of the following : <list>
                     <item><gi>bibl</gi> or <gi>biblStruct</gi> for books, newspapers, pamphlets
                        etc. originally printed; </item>
                     <item><gi>msDesc</gi> for unique manuscript archival documents or inscriptions; </item>
                     <item><gi>p</gi> or <gi>note</gi> for unpublished
                           <soCalled>born-digital</soCalled> materials;</item>
                     <item><gi>bibl</gi> or <gi>ref</gi> for web pages or other digitally
                        distributed materials</item>
                     <item><gi>recording</gi> for recorded or broadcast speech or video</item>
                  </list>
               </p>
               <p>All of these elements have their own detailed substructure, concerning which we
                  make no particular recommendations, since their use will be highly
                  project-specific. For archival purposes, it is required only that at least one of
                  the elements listed above appear. In the case of conventionally printed and
                  published material, a standard bibliographic description should be supplied or
                  referenced, using the usual conventions (author, title, publisher, date, ISBN,
                  etc.), and using a standard citation format. For other kinds of material,
                  different data is appropriate: for example, in transcripts of spoken data it is
                  customary to supply demographic information about each speaker, and the context in
                  which the speech interaction occurs. Standards defining the range of such
                  information for the use of particular research communities should be followed (for
                  example, defined by CLARIN) where appropriate. </p>
               <p>Other components of the <gi>fileDesc</gi> element such as <gi>extent</gi> may be
                  used, but are not required.</p>
            </div>
            <div xml:id="D1enc">
               <head>Encoding description</head>
               <p>The second major subdivision of the TEI header is contained by an optional
                     <gi>encodingDesc</gi> element, and may potentially contain a very large number
                  of semi-structured metadata elements covering most aspects of the process by which
                  a source has been encoded. Its function thus overlaps with that of the ODD file
                  discussed in section <ptr target="#rec2"/>. Components of this element specify the
                  methods and editorial principles which governed the transcription or encoding of
                  the resource and may also include sets of coded definitions used by other
                  components. The following elements, many of which have quite extensive
                  substructure, are potentially available: <list>
                     <item>Project goals and research agenda (<gi>projectDesc</gi>); </item>
                     <item>Sampling principles and methods employed (<gi>samplingDecl</gi>);</item>
                     <item>Editorial principles and practices (<gi>editorialDecl</gi>); </item>
                     <item>XML tagging used (<gi>tagsDecl</gi>, <gi>styleDefDecl</gi>,
                           <gi>schemaSpec</gi>); </item>
                     <item>Reference schemes applied (<gi>refsDecl</gi> ; <gi>geoDecl</gi>) </item>
                     <item>Classification scheme used (<gi>classDecl</gi>)</item>
                  </list>
               </p>
               <p> Although such information will be of considerable importance and usefulness for
                  the correct usage of a resource, there is as yet very little agreement or common
                  practice in the way it should be recorded in the header, some projects providing
                  extensive documentation, and others none at all. For our purposes, therefore, we
                  recommend only that the <gi>projectDesc</gi> element be supplied. This element is
                  used to state explicitly the project goals and research agenda associated with the
                  creation of the resource. The persons or agencies directly responsible will
                  already have been mentioned as a part of identifying the resource; the purpose of
                  this section is to provide further background on such matters as the purposes for
                  which the corpus was created, its design goals, its theoretical framework or
                  context, its intended usage, target audience etc. Although such information is of
                  necessity impressionistic and anecdotal, it can be very helpful to the user
                  seeking to determine the potential relevance of the resource to their own needs. </p>
               <p>If other descriptive elements are supplied, they will be archived along with the
                  rest of the Header, and may be harvested to provide a richer description of the
                  resource but their presence is not required. </p>
            </div>
            <div>
               <head>Profile Description</head>
               <p>The TEI Header permits a number of other <soCalled>non-bibliographic</soCalled>
                  metadata components within the <gi>profileDesc</gi> element. These include, for
                  example, information about the natural language or languages represented in a
                  resource (<gi>langUsage</gi>), ways in which it may be classified
                     (<gi>textClass</gi>, <gi>keywords</gi>, etc.) </p>
               <p>If any of these descriptive elements are supplied, they will be archived along
                  with the rest of the Header, and may be harvested to provide a richer description
                  of the resource but their presence is not required. </p>
            </div>
            <div>
               <head>Revision Description</head>
               <p>This optional element is used to record significant stages in the evolution of a
                  resource. It should contain a series of <gi>change</gi> elements, in reverse
                  chronological order, most recent first. We recommend that at least one such
                     <gi>change</gi> element be supplied in order to record the date of archiving of
                  the source. If this is not present, then it should be added during the
                  accessioning process.</p>
            </div>
         </div>
         <div xml:id="rex2">
            <head>Validation of the Source</head>
            <p>Each TEI resource archived (i.e. each <gi>TEI</gi> or <gi>teiCorpus</gi>) must be
               accompanied by a formal specification of its schema and documentation of the
               semantics of the elements, attributes, datatypes defined by the schema. For the most
               part, of course, those semantics are as defined in the version of the TEI Guidelines
               specified by the <att>version</att> attribute on the root element, but since the TEI
               offers many overlapping ways of doing the same thing, it may be necessary to
               supplement and make more precise the default documentation by means of user-specific
               documentation. This is provided by means of a free-standing document, referred to as
               an ODD.</p>
            <p>The ODD (<q>One Document Does it all</q>) format is defined in the TEI Guidelines,
               and has also been the subject of a small number of introductory guides and tutorials
               (see the bibliography). Nevertheless it is not as well known or understood within the
               broad TEI community as other parts of the TEI and hence not as widely used as it
               might be. Its importance to our project lies in the mechanisms it offers for
               validation and documentation of a TEI-XML resource beyond simple validity against the
               generic TEI All schema. </p>
            <p>An ODD document is a TEI-conformant XML resource which describes a tagging system
               informally, in the same way as a typical project encoding manual, by listing the
               elements used, describing the cirucumstances in which they are applicable, providing
               examples of their usage, etc. It also contains a formally expressed specification of
               exactly which parts of the TEI architecture have been used, and how these have been
               modified. This is expressed by means of a <gi>schemaSpec</gi> element for "schema
               specification". </p>
            <p>A schema specification expressed the components which are to be combined to form a
               schema in any of the following ways : <list>
                  <item>a list of <term>TEI modules</term> to be included by reference; </item>
                  <item>a list of TEI elements to be included by reference;</item>
                  <item>a subset of declarations from a named module, defined either by inclusion
                     ("select only x y and z from module a") or by exclusion ("select everything
                     except x y and z from module a") </item>
                  <item>modifications of certain parts of an existing specification, for example to
                     change class memberships, add a new usage example, suppress one or more
                     attributes, change lists of legal attribute values, etc. </item>
               </list></p>
            <p>An ODD may be written from scratch, like any other TEI XML document. It is more
               usually created (initially at least) by software such as the TEI applications
                  <ident>Roma</ident> or <ident>Byzantium</ident>, which allow the user to construct
               a new ODD using a relatively simple interface to the full TEI specifications. The
               user can start from an existing schema and add or remove components, save an ODD
               specification for futurre manipulation and so on. These interfaces also provide
               simple access to the XSLT Stylesheets to process the ODD being constructed,
               generating from it either formal schemas in RELAXNG, DTD or W3C Schema or
               documentation files in HTML or PDF. An ODD can also be generated automatically by
               applying the <ident>ODD By Example</ident> stylesheet to a body of existing valid TEI
               XML files. </p>
         </div>
         <div xml:id="rex3">
            <head>Physical Organization</head>
            <p>A TEI XML object, for the purposes of accessioning, should contain the whole of the
               root TEI or teiCorpus element. If portions of this document are embedded by means of
               x Include statements or other URI reference, resolving these should be as simple as
               possible. For that reason, we recommend that before the object is archived its
               components should be moved to a simple directory structure, in which each x Included
               file is at the same level, and each embedded graphic or other media file is moved to
               a single <q>Media</q> directory at the same level. This in turn will require some
               modification of the existing source files, to ensure that Ur Is continue to be valid. </p>
            <p>For example consider the following imaginary TEI XML fragment: <egXML
                  xmlns="http://www.tei-c.org/ns/Examples"><![CDATA[
                 <body><include xmlns="http://www.w3.org/2001/XInclude" href="../part1.xml"/>
                  <p>
                     This text contains a local pointer <ptr target="#section34"/> and a remote one <ptr target="http://www.tei-c.org"/>
                  </p>
                    <include  xmlns="http://www.w3.org/2001/XInclude" href="/home/demo/TEIstuff/part2.xml"/>
                  <p>This paragraph contains different kinds of media
                  <figure><graphic url="pic.png"/></figure>
                  <media
                     mime Type="video/mp4"
                     url="media/clip45.mp4"
                     dur="PT45M"
                     width="500px">
                     <desc>A 45 minute video clip to be displayed in a window 500
                        px wide </desc>
                  </media>
<p>               This paragraph also contains a remote reference 
<name ref="http://wikipedia.org/whoever">John Brown</name></p>
               
               ]]></egXML> In this fragment, the contents of the files <ident>../part1.xml</ident>
               and <ident>/home/demo/TEIstuff/part2.xml</ident> should preferably be obtained
                  <hi>before archiving is carried out</hi> and inserted at the appropriate place in
               the source. If this is not possible (perhaps because the resulting file would be too
               large), the files concerned should be included within the archival package at the
               same level in the file structure as the file containing the fragment quoted here, and
               the <att>href</att> values modified, to point to "part1.xml" and "part2.xml"
               respectively. </p>
            <p>The values of each of the attributes <att>target</att>, <att>url</att>, and
                  <att>ref</att> should be checked during accession to ensure that the resource
               indicated by the URI is accessible. This can be done for XML content by means of an
               XSLT2 style sheet, using the <ident>doc-available()</ident> and
                  <ident>resolve-Uri()</ident> built-in functions. When the resource indicated by
               the <att>url</att> attribute is available, but is not stored in a local
                  <ident>media</ident> directory at the same level as the rest of the resource, we
               recommend that it should be obtained and copied to such a directory, and the source
               modified accordingly. </p>
            <p>Ur Is within a TEI-XML document which do not imply transclusion of text or media may
               be left unmodified in the source, although they should be checked for validity,
               particularly those which point locally (i.e. links of the form
                  <code>url="xxxx"</code> or <code>url="#xxx"</code>). In the general case however
               the only reliable way of checking a URI is to follow it, using a tool such as
                  <ident>curl</ident> to access the HTTP header for the indicated URL and then
               processing that. Such checking could be done automatically during the process of
               ingesting the source into the Archive. It is probably unreasonable, however, to
               expect all such links to be accessible all the time, particularly those pointing to
               arbitrary web sites outside the scope of the Archive's concerns.</p>
         </div>
         <div xml:id="tech">
            <head>Technical background</head>
         </div>
         <div xml:id="pilot">
            <head>Pilot Implementation</head>
            <p>To perform the validation tasks suggested above, the following software components
               are required: <list>
                  <item>An XML validator</item>
                  <item>An XSLT processor</item>
                  <item>The required version of the TEI Guidelines</item>
                  <item>TEI Stylesheets to process ODD files</item>
                  <item>An XSLT style sheet to check availability of XML resources referenced by
                     URI</item>
                  <item>An XML processor to resolve X Included document fragments</item>
               </list></p>
            <!--Quels outils ?
Proposer un environnement logiciel en annexe 
Problème de vérification des URIs (images, sons vidéos  et SVG  Balise TEI « media » 
Existe t-il des validateurs d’URIs 
Prise en compte des Name-Space 
-->
         </div>
         <div xml:id="further">
            <head>Future work</head>
         </div>
         <div xml:id="gloss">
            <head>Glossary</head>
            <list type="gloss">
               <label>TEI</label>
               <item/>
               <label>schema</label>
               <item>a set of rules expressed using a formal language (examples include RELAXNG, W3C
                  Schema, and DTD) which can be used to validate the tagging of an XML
                  document.</item>
               <label>ODD</label>
               <item>("One Document Does it all") a format defined by the TEI which documents the
                  schema applicable to a set of TEI XML documents; also, a document in that
                  format.</item>
               <label>TEI module</label>
               <item>One of the 14 groups of declarations making up the TEI system. Each module
                  contains declarations for a varying number of elements and their attributes. Some
                  modules also declare classes , macros, or datatypes, although the bulk of these
                  infrastructural declarations are collected in a single module called
                     <ident>tei</ident>. </item>
            </list>
         </div>
         <div xml:id="bibl">
            <head>Bibliography</head>
            <listBibl>
               <head>Literature on ODD</head>
               <bibl>
                  <note>Specification complète du langage ODD</note><ref
                     target="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/TD.html"
                     >http://www.tei-c.org/release/doc/tei-p5-doc/en/html/TD.html</ref></bibl>
               <bibl><note>Description du traitement des fichiers ODD</note>
                  <ref target="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/USE.html#IM"
                     >http://www.tei-c.org/release/doc/tei-p5-doc/en/html/USE.html#IM</ref></bibl>
               <bibl>
                  <ref target="http://www.tei-c.org/Support/Learn/odds.xml">Getting started with P5
                     ODDs</ref>
                  <note>Article discursif (P5)</note></bibl>
               <bibl>
                  <ref target="http://tbe.kantl.be/TBE/modules/TBED08v00.htm"
                     >http://tbe.kantl.be/TBE/modules/TBED08v00.htm</ref>
                  <note>Introduction tutoriel (P4)</note></bibl>
               <bibl><ref target="http://www.tei-c.org/Guidelines/Customization/odds.xml"
                     >http://www.tei-c.org/Guidelines/Customization/odds.xml</ref>
                  <note>Introduction tutoriel</note></bibl>
               <bibl>
                  <author>
                     <forename>Lou</forename>
                     <surname>Burnard</surname>
                  </author>
                  <author>
                     <forename>Sebastian</forename>
                     <surname>Rahtz</surname>
                  </author><title>RelaxNG with Son of ODD</title>
                  <ptr
                     target="http://conferences.idealliance.org/extreme/html/2004/Burnard01/EML2004Burnard01.html"/>
                  <title level="m">Proceedings of Extreme Markup Languages 2004</title>
                  <note>Technical description of the new ODD system developed for TEI P5.</note>
               </bibl>
               <bibl><author><forename>James</forename>
                     <surname>Cummings</surname></author>
                  <title level="m">ODDly Pragmatic: Documenting encoding practices in Digital
                     Humanities projects</title><ref
                     target="http://blogs.it.ox.ac.uk/jamesc/2013/09/21/oddly-pragmatic/">[Blog
                     entry summarizing talk given at JADH 2013]</ref>
               </bibl>
            </listBibl>
         </div>
      </body>
   </text>
</TEI>
