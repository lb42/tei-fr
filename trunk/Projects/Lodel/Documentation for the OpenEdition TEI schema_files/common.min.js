$(document).ready(function(){var q=$('#search #q');var qvalue=q.val();q.focus(function(){if($(this).val()==qvalue)$(this).val('');}).blur(function(){if($(this).val()=='')$(this).val(qvalue);});var abstracts=$('div.abstract');abstracts.not(':first').addClass('hidden');$('#navAbstracts a').eq(0).addClass('active').end().click(function(){abstracts.addClass('hidden');$('div'+$(this).attr('href')).removeClass('hidden');$(this).blur().addClass('active').siblings('a').removeClass();return false;});$('img').removeAttr('style');var prevBottom=0;var sidenotes=$('ul.sidenotes');var sidenotesLastIndex=sidenotes.length-1;sidenotes.each(function(){var self=$(this);var thisTop=self.offset().top;var diffPos=prevBottom-thisTop;prevBottom=thisTop+self.height();if(diffPos>0){self.css('top',diffPos);prevBottom+=diffPos;}
if(sidenotes.index(this)==sidenotesLastIndex){var textContainer=$('#text > div.text');var textLastChild=textContainer.children(':last');var textBottom=textLastChild.offset().top+textLastChild.height();var diffBottom=prevBottom-textBottom;if(diffBottom>0){textContainer.css('padding-bottom',diffBottom+'px');}}});var loginError=$('#loginbox strong.error');var loginBlock=$('#loginbox div.togglable');loginBlock.addClass('fixed');if(loginError.length<1&&$('#loginbox').hasClass('log-out')===false){loginBlock.addClass('hidden');}
$('#loginbox.log-in legend > span').hover(function(){$(this).addClass('hover');},function(){$(this).removeClass('hover');}).click(function(){loginBlock.toggleClass('hidden');return false;});$('#loginbox.log-in :reset').click(function(){loginBlock.addClass('hidden');loginError.remove();return false;});var isMail=/^[\w\-]+(\.[\w\-]+)*@[\w\-]+(\.[\w\-]+)*\.[\w\-]{2,}$/;$('#sendTo').submit(function(){var error=new Array();$(this).find('label').removeClass('error');if(false===isMail.test($('#to').val())){error[0]='to';}
if(false===isMail.test($('#from').val())){error[1]='from';}
if(error.length>0){for(e in error){$('label[for='+error[e]+']').addClass('error');}
window.location.href='#sendTo';return false;}
return true;});});