<?xml version="1.0" encoding="UTF-8"?>
<TEI xmlns:tei="http://www.tei-c.org/ns/1.0" xmlns="http://www.tei-c.org/ns/1.0">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>TP3 : oXygen</title>
            </titleStmt>
            <publicationStmt>
                <publisher>TEI MEET</publisher>
                <availability>
                    <p>Freely available for use and derivative works under a Creative Commons
                        Attribution license.</p>
                </availability>
                <date>Jan 2011</date>
            </publicationStmt>
            <sourceDesc>
                <p>Some parts may be lifted from previous talks/workshops by the TEI Community.</p>
            </sourceDesc>
        </fileDesc>
    </teiHeader>

    <text>
        <body>
            <div>
                <head>À la découverte d' Oxygen - 3</head>
                <p>Dans ce troisième exercice, nous allons approfondir votre expérience avec Oxygen
                    pour : <list>
                        <item>l'encodage XML d'un document Word existant</item>
                        <item>la représentation des structures aperçues dans un pièce de
                            théâtre</item>
                    </list>
                </p>
            </div>


            <div>
                <head>Par ma chandelle verte...</head>
                <p>Voici le commencement d'une scène extraite de <title>Ubu Roi</title> de Alfred
                    Jarry (1896), dans la version téléchargeable sur Gallica. </p>
                <p><graphic height="8cm" url="Travaux/ubu-gallica.png"/></p>
                <p>Et voici le début de la même scène, transcrite avec Word:</p>
                <p><graphic height="8cm" url="ubu-word.png"/></p>
            </div>


            <div>
                <head>Transformation d'un fichier Word</head>
                <p>Vous avez vu comment baliser un fichier « text ». Comment pouvons-nous faire de
                    même avec notre fichier Word ?</p>
                <p>Nous pourrions exporter le fichier Word au format « plein text ». Nous pourrions
                    aussi faire un copier-coller. Mais dans chaque cas, nous perdrions le formatage
                    qui distingue (par exemple) le nom de chaque locuteur de ces énoncés. </p>
                <p>Si le fichier Word est bien stylé, on peut le transformer en XML, sans perte
                    d’information. L'outil OxGarage nous aidera.</p>
                <list>
                    <item>Ouvrez votre Internet browser, et allez sur le site
                            <ref>http://www.tei-c.org/ege-webclient/</ref></item>
                    <item>Cliquez sur <ident>Text Documents</ident>. Dans la liste des formats de
                        saisi proposée, cochez la case pour Microsoft Word Document.</item>
                    <item>Une liste des formats cibles proposés apparaît. Cochez la case pour TEI P5
                        XML.</item>
                    <item>En haut de l'écran un bouton <ident>Browse</ident> apparaît. Cliquez sur
                        ceci, et naviguez jusqu'au fichier <ident>ubu.doc</ident> dans votre dossier
                            <ident>Travaux</ident>.</item>
                    <item>Cliquez sur le grand bouton <ident>Convert</ident> et patientez. </item>
                    <item>Le site vous renvoie (après un bref délai) un fichier
                            <ident>ubu.xml</ident>. Enregistrez-le dans votre dossier
                            <ident>Travaux</ident>.</item>
                </list>
            </div>

            <div>
                <head>Structure of a dramatic text</head>
                <p>As well as a title, and a list of characters, a play typically contains : <list>
                        <item>
                            <term>stage directions</term> of various kinds ... we will tag these
                            with <gi>stage</gi> (perhaps using its <att>type</att> attribute to
                            distinguish the various kinds)</item>
                        <item>
                            <term>speeches</term> of various characters ... we will tag these with
                                <gi>sp</gi></item>
                        <item> labels indicating who is speaking ... we will tag these with
                                <gi>speaker</gi></item>
                        <item> a speech contains a paragraph of prose (tagged with <gi>p</gi>) or
                            some verse (tagged with <gi>l</gi>) ; it may also contain <gi>stage</gi>
                            elements</item>
                        <item>a sequence of speeches makes up a scene, which we will tag with
                                <gi>div type="scene"</gi>; a sequence of scenes makes up an act,
                            which we will tag <gi>div type="act"</gi>
                        </item>
                    </list>
                </p>
            </div>

            <div>
                <head>Tag translating</head>
                <p>Let's see what OxGarage has made out of our Word file. At least it's a valid TEI
                    document, even if it is full of lies...</p>
                <list>
                    <item>Start up Oxygen, et open the file <ident>goldoni.xml</ident> which you
                        just created.</item>
                    <item>Don't look at the TEI Header for the moment : you can complete that later.
                        Scroll down to the start of the play. </item>
                    <item>If you look at the summary view, or change briefly to Author mode, you
                        will see that the conversion has correctly identified the act and scene
                        structure. It has however converted each speech into a <gi>div</gi>,
                        containing a <gi>head</gi> and a <gi>p</gi>. This makes our life much
                        easier. (It happened because in the Word file, we used a heading style to
                        mark each speaker prefix )</item>
                    <item>In Text view, put the cursor into any one of the <gi>div</gi> tags</item>
                    <item>From the <ident>Document</ident> menu choose the <ident>XML-Refactoring ->
                            Rename Element </ident> command (or type ALT-SHIFT-R).</item>
                    <item><p>Oxygen displays this dialogue box </p>
                        <p><graphic height="5cm" url="../Graphics/rename.png"/></p></item>
                    <item>In the <code>New name</code> box, change <code>div</code> to
                            <code>sp</code>, which is the name of the element we want, and check the
                        box <ident>Rename all elements with the same name</ident>
                    </item>
                    <item>Click <ident>OK</ident> and all the <gi>div</gi> elements become <gi>sp</gi>s. (Our
                        document is no longer valid, but we will fix that in a moment.)</item>
                    <item>Now repeat this manoever for all the <gi>head</gi> elements : turn these all into <gi>speaker</gi> elements.</item>
                    <item>Our document is still invalid : the <gi>div</gi> elements marking the scene and act divisions should not have been converted. But there are only a few of these, so it is not so hard to change them back. Click on the <gi>sp</gi> tag immediately before the words <q>ATTO PRIMO</q> and type ALT-SHIFT-R. This time click the <ident>Rename current element </ident>radio button before choosing <code>div</code> as the replacement.</item>
                    <item>Repeat the manoever to rename the <gi>speaker</gi> element containing the words ATTO PRIMO as <gi>head</gi>. Repeat it again so that the sequence <gi>sp</gi><gi>label</gi><code>SCENA PRIMA</code> gets retagged as <gi>div</gi><gi>head</gi><code>SCENA PRIMA</code></item>
                    <item>If you do this correctly, lots of red marks should disappear. Click on the first one still remaining to move down to the next scene, where you will need to repeat the manoever for a third time, so that the sequence <gi>sp</gi><gi>label</gi><code>SCENA SECONDA</code> gets retagged as <gi>div</gi><gi>head</gi><code>SCENA SECONDA</code> (You can also just correct the tags by retyping them if you like).</item>
                   
                </list>
                <p>The stage directions in our text have all been converted to <gi>hi rend="Caption_Characters"</gi> elements because they were styled with a style of that name and we did not provide any mapping for that style name in the Word to TEI conversion. For the moment, simply convert all the <gi>hi</gi> elements to <gi>stage</gi> using the Rename Element command again. </p><p>Finally, we will remove all the redundant <code>rend="Normal"</code> attribute specifications. This is easily done using the <ident>Find</ident> menu</p>
                <list>
                    <item> Select the text <q> rend="Normal"</q> somewhere on the screen.</item>
                    <item>Choose Find/Replace on the Find menu, or type CTRL-F</item>
                    <item>Check <ident>Case sensitive</ident> and <ident>Wrap around</ident> in the Options . Uncheck the box labelled Enable XML search options. The dialog should look like this : </item>
                    <item><figure><graphic url="../Graphics/noNormal.png"/></figure></item>
                    <item>Press Replace All</item>
                </list>
                <p>If you'd like to improve your file further, here are some suggestions:
                <list>
                    <item>Use the <att>type</att> attribute to distinguish different kinds of stage direction</item><item>Turn the sequence of <gi>p rend="Text body indent"</gi> elements at the start into a cast list, tagged with <gi>castList</gi>. </item><item>Look for words of Venetian dialect and mark them with <gi>foreign</gi></item><item>Add some information to the Header, such as the correct title and author, your name as encoder, and the source of this text (It is transcribed from the "Commedia", di Carlo Goldoni
                                                volume primo, nona edizione
                        collezione: I grandi libri Garzanti
                        Garzanti editore
                        Milano, 1992 )</item>
                </list></p><p>You'll notice that we did not specify a schema to use for this document. Consequently all the TEI elements are available for you to use... </p>

            </div>
        </body>
    </text>
</TEI>
