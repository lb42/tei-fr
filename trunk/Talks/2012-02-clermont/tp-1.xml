<?xml version="1.0" encoding="UTF-8"?>
<TEI xmlns:tei="http://www.tei-c.org/ns/1.0"
  xmlns="http://www.tei-c.org/ns/1.0">
  <teiHeader>
    <fileDesc>
      <titleStmt>
        <title>TP1 : oXygen</title>
        <author>TEI@Oxford</author>
      </titleStmt>
      <publicationStmt>
        <publisher>TEI</publisher>
        <availability>
          <p>Freely available for use and derivative works under a Creative
            Commons Attribution license.</p>
        </availability>
        <date>Octobre 2011</date>
      </publicationStmt>
      <sourceDesc>
        <p>Some bits may be lifted from previous talks/workshops by the TEI
          Community.</p>
      </sourceDesc>
    </fileDesc>
  </teiHeader>
  <text>
    <body>
      <div>
        <head>À la découverte d'Oxygen</head>
        <p>Dans ce premier exercice, nous allons nous servir d'Oxygen pour : <list>
            <item>la création d'un nouveau document XML</item>
            <item>le balisage progressif d'un document</item>
            <item>la validation continuelle d'un document</item>
            <item>l'affichage du document sans balise</item>
          </list>
        </p>
      </div>
      
<div><head>Le document né-numérique</head>
<p>La TEI ne sert pas uniquement à l'encodage des documents anciens,
déjà existants sur papier ou pierre. Elle sert aussi à la création de
documents nouveaux <foreign>ex nihilo</foreign>....</p>

      <div>
        <head>Création d'un document</head>
<list>
<item>Démarrer Oxygen.</item>
<item>Cliquez sur l'icône Nouveau en haut à gauche (ou sélectionnez
Nouveau du menu Fichier, ou tapez CTRL-N). Pour ouvrir la boîte de
dialogue Nouveau</item>
<item>Choisissez <ident>Cadre des modèles</ident>, ensuite <ident>TEI
P5</ident>, puis <ident>Bare</ident>, pour sélectionnez un
schéma basique TEI. </item>
<item><graphic height="5cm" url="../Graphics/Oxy12/nouveau-bare-1.png"/></item>
<item> Cliquez sur le bouton <ident>Créer</ident> en bas. Oxygen affiche un
document TEI minimal que vous allez compléter.</item>
</list>
<p>Le schéma TEI bare contient un minimum de balises, mais il permet
quand-même de  décrire un document complet TEI. </p>

<p>On est maintenant dans l'espace de travail typique d'Oxygen. Par
défaut, il y a plusieurs petits écrans, autour d'un grand espace blanc
ou nous allons éditer notre document. A gauche, par exemple, vous
voyez dans la fenêtre <ident>Sommaire</ident> un aperçu de la structure du
document. </p>

<p>Vous voyez qu'un document TEI est divisé en deux parties. En haut,
vous avez les métadonnées, entourées de la balise
<gi>teiHeader</gi>. En bas, se trouve le texte, entouré de la balise
<gi>text</gi>.  </p>
<p><graphic height="5cm" url="../Graphics/Oxy12/nouveau-bare-2.png"/></p>

<p>En bas de l'écran, vous voyez qu'il est possible de modifier l'affichage du
document en cliquant sur les boutons <term>Texte</term>,
<term>Grille</term>, ou <term>Auteur</term>. Nous, on n'a pas peur des
balises, donc on va commencer à l'éditer en mode
<term>Texte</term>. </p>
<p>D'abord, on va fournir les métadonnées essentielles à tout nouveau
document : son titre, sa distribution, et ses origines. Oxygen vous 
propose des morceaux de texte qu'il faut changer puis compléter...
<list>
<item>Remplacez le mot <q>Title</q> (entre les balises <gi>title</gi>
et <gi>/title</gi>) par un titre pour votre document.  À vous de
choisir ! Quelque chose comme "À la découverte d'Oxygen"
suffirait. </item>
<item>Remplacez les deux autres morceaux de texte proposés par des
mentions plus appropriées. Par exemple, pour publication, on pourrait
mettre <q>Brouillon inédit</q> ou <q>Distribué sur mon blog</q> ; pour
  <gi>sourceDesc</gi>, on vous propose <q>Œuvre originale, guidé par une
formation TEI au CESR de Tours</q>.</item> 
</list>
</p>
<p>Oxygen par défaut cherchera à maintenir votre document dans un état de
validité. Qu'est-ce qui arrive si vous l'endommagez ?
<list>
<item>Effacez quelques lettres à l'intérieur de n'importe quelle
balise : par exemple changez <gi>publicationStmt</gi> en
<gi>publicat</gi>. </item>
<item>Oxygen fait de son mieux. D'abord, il change la balise fermante
correspondante (qui devient instantanément <gi>/publicat</gi>): le 
<!-- Il était écrit "instamment", qui signifie "de manière pressante" = insistently.
  J'ai substitué par "instantanément", mais peut-être n'est-ce pas ce que tu voulais dire ? -->
document reste donc bien formé. Mais il n'est plus valide : par conséquent les
balises fautives sont soulignées en rouge ; il y a un message d'erreur
en bas de l'écran ; et à droite il y a quelques taches 
rouges.</item>
<item>Cliquez sur les taches rouges pour essayer de comprendre la
manière dont une erreur peut en enchaîner une autre.</item>
<item>Cliquez sur CTRL-Z (ou sélectionnez <ident>Undo</ident> du menu
<ident>Edit</ident>) pour revenir dans un état de grâce... vous verrez
que le petit carreau rouge en haut à droite devient vert après
correction de toutes les erreurs.</item>
</list>
</p>
<p>En plus, Oxygen ne vous permettra d'ajouter que des balises
prévues dans le schéma actuellement sélectionné pour le document.
<list>
<item>Mettez le curseur à la fin de la 7ème ou au début de la 8ème ligne,
entre <gi>/title</gi> et <gi>/titleSmt</gi>;</item>
<item>tapez <code>&lt;</code> et arrêtez un instant ;</item>
<item>le carreau vert redevient rouge, parce que vous n'avez pas
encore entré le nom de l'élément souhaité.</item>
<item>Oxygen vous propose une liste de balises disponibles à cet emplacement
dans le document : notamment vous avez le droit d'insérer ici un élément
<gi>author</gi> ou encore un <gi>title</gi>, de terminer le
  <gi>titleStmt</gi>, d'insérer un commentaire XML etc.  </item>
<item>Tapez sur ENTRER pour accepter la première proposition. Oxygen
insert dans votre document les balises <gi>author</gi> et
<gi>/author</gi>.</item>
<item>Le curseur reste à l'intérieur de la balise ouvrante, au cas où
vous désireriez spécifier ses attributs. Faire bouger le curseur d'un
caractère à droite et tapez votre nom, comme auteur du fichier.</item>
</list>
        </p>

      </div>


<div>
        
<head>Ajout de texte au document</head>
<p>Enfin, nous sommes prêts pour commencer la création de notre document. À
vous de décider de son contenu et de son balisage.  </p>

<p>D'abord, quels composants proposeriez-vous pour votre document ?  Un
document contenant un seul paragraphe n'est guère probable ! Avec le
schéma <term>bare</term> vous avez le droit de signaler : <list><item>des
titres ... à baliser avec la balise <gi>head</gi></item>
<item>des chapitres ... à baliser avec la balise <gi>div</gi></item>
<item>des listes ... à baliser avec la balise <gi>list</gi></item>
<item>des paragraphes ... à baliser avec la balise <gi>p</gi></item>
</list>
  Allons-y !</p>

<p>Dans le reste de ce petit tutoriel, nous allons vous montrer quelques
manipulations utiles offertes par ce logiciel. </p>

<p>D'abord, une question important. Pour le contenu, OK, il faut le créer
  -- mais est-ce qu'il faut toujours taper soi-même les balises ?
Non : Oxygen est là pour vous aider. Vous avez déjà vu comment il peut
vous proposer la liste des balises disponibles à un certain
emplacement du document. Il peut aussi vous proposer comment baliser un morceau de texte
sélectionné. </p>

<list>
<item>Avec la souris, sélectionnez le contenu du <gi>body</gi>,
i.e. la séquence <code>&lt;p>Some text here&lt;/p></code>. </item>
<item>Tapez CTRL-E (ou sélectionnez <ident>XML Refactoring</ident> et
ensuite <ident>Entourer des balises</ident> dans le menu
<ident>Document</ident>.</item>
<item>Oxygen vous propose toutes les balises qui pourraient
éventuellement être insérées à cet endroit précis du document : dans ce cas, il est
conseillé de sélectionner <gi>div</gi>. Puis, cliquez sur
<ident>Accepter</ident></item>
<item>L'élément <gi>div</gi> va contenir le premier chapitre de votre
document. Insérez donc un titre au début de ce <gi>div</gi>, en vous
servant de la balise <gi>head</gi> </item>
<item>Il serait aussi utile de numéroter vos chapitres d'une manière
explicite : pour cela, on vous propose l'attribut <att>n</att> qui est
disponible sur n'importe quel élément TEI, y compris
<gi>div</gi>. </item>
<item>Mettez le curseur <emph>à l'intérieur</emph> de la
balise <gi>div</gi> juste avant le &gt; et tapez un seul
espace. Oxygen vous propose un menu des attributs disponibles. </item>
<item>Tapez sur RETOUR pour sélectionnez <att>n</att>. Oxygen vous
informe qu'il faut dans ce cas ajouter une valeur, et le curseur reste
entre les guillemets.</item>
<item>Tapez (par exemple) <code>1</code>, et votre document redeviendra
valide. </item>
        </list>

<p>Votre document devrait maintenant ressembler à ceci :</p>
<p><graphic height="4cm" url="../Graphics/Oxy12/body-shot.png"/></p>
<p>À vous d'ajouter maintenant du texte à ce paragraphe : un peu plus
intéressant que <q>some text here</q> de préférence ! Décrivez-nous vos
premières réactions avec Oxygen ; partagez vos idées sur la situation
politique actuelle ; écrivez ce que vous voulez.</p>
<p>Sans doute aurez-vous besoin de plus d'un seul paragraphe. Comment
  faire pour terminer celui-ci et commencer un nouveau ? Bien-sûr on peut
simplement taper les balises <gi>/p>&lt;p</gi> mais il y a une autre
manière plus simple. </p>
</div>


<div><head>Division des  éléments</head>
<p>Supposons que vous avez maintenant quelques centaines de mots dans votre
seul paragraphe, et que vous voulez le diviser en plusieurs.</p>
<list>
<item>Mettez le curseur au point de chaque division souhaitée </item>
<item>Tapez CTRL-ALT-D ou sélectionnez  <ident>XML Refactoring</ident>
et ensuite <ident>Élément de division</ident> (sic) dans le menu
<ident>Document</ident>.</item>
</list>
<p>Vous pouvez faire pareil pour diviser le chapitre unique, mais
attention à choisir un endroit valide pour effectuer la division :
<emph>entre</emph> deux éléments <gi>p</gi>, et non pas dans l'enceinte
d'un <gi>p</gi>. </p>
<p>Dans un de vos chapitres, n'omettez pas d'ajouter une liste, balisée
avec un élément <gi>list</gi>, contenant une séquence de <gi>item</gi>
éléments, précédée d'un <gi>head</gi> facultatif.</p>

</div>


<div><head>Affichage du texte balisé</head>
<p>Est-ce que la quantité de balises dans votre document commence à
vous inquiéter un peu ? </p>
<p>On peut  mettre en ordre le balisage que l'on a fait, en cliquant sur le
bouton d'indentation, ou en tapant CTRL+MAJ+P, ou en sélectionnant
Source->Indenter le document sur le menu Document. Mais peut être 
préféreriez-vous voir disparaître les balises ?</p>
<list>
<item>Au fond de la fenêtre vous voyez trois onglets: Texte , Grille,
et Auteur. Sélectionnez le dernier. L'affichage de votre document
change, et un nouveau menu <ident>TEI P5</ident> devient
disponible. Sur ce menu, sélectionnez <ident>Mode d'affichage</ident> des balises et
regardez les possibilités offertes par ses options. </item>
<item>L'option <ident>Toutes les balises</ident> affiche les balises
en icones; l'option <ident>Aucune balises</ident>les fait disparaître
totalement.</item>
<item> Notez en plus que votre document est maintenant stylé ;  il y a
des changements de police ; les retours de chariots sont traités comme
des blancs ; etc.  </item>
<item>Dans mode auteur, on peut diviser un élément simplement en
tapant RETOUR deux fois. Expérimentez cela. 
<!-- Attention : en mode auteur
Oxygen vous propose plusieurs éléments possibles qui ne sont pas
disponibles dans le schéma Bare : il faut s'en méfier.--></item></list>


<p>Plus tard, nous verrons comment vous pourrez contrôler l'affichage de
votre document avec une <term>feuille de style</term>.</p>

<p>N'oubliez pas d'enregistrer votre document dans votre dossier de
travail : nous allons encore nous en servir... </p>

</div>
</div>
      
      <div>
        <head>Sample text</head>
        <p>Maintenant nous allons baliser ce sonnet de Du Bellay, un écrivain du XVIe siècle
          : </p>
        <p>
          <graphic height="8cm" url="../2010-01-tours/duBellay/sonnet.png"/>
        </p>
        <p>Pour vous simplifier la vie, on a déjà préparé une transcription prête à l'emploi... ne
          la regardez pas tout de suite !</p>
     
      
      <div>
        <head>Création du document</head>
        
        <p>Ouvrez Oxygen. Cliquez sur l'icône Nouveau en haut à gauche, (ou sélectionnez Nouveau du
          menu Fichier, ou tapez CTRL-N.) pour ouvrir la boîte de dialogue Nouveau</p>
        <p>
          <list>
            <item>Cette fois, choisissez <ident>Cadre des modèles</ident>, ensuite <ident>TEI
              P5</ident>, et ensuite <ident>TEI-Lite</ident>, pour sélectionnez un schéma TEI plus
              complet. </item>
            <item><graphic height="4cm" url="../Graphics/Oxy12/nouveau-4.png"/></item>
            <item>Comme auparavant, Oxygen vous propose un squelette du document ; vous observerez
              que le schéma TEI lite décrit un document TEI plus élaboré avec un choix de balises
              plus important. </item>
            <item>Complétez l'entête TEI avec des indications de titre (<q>Un sonnet du Du Bellay
              numérisé</q>), distribution, et source (<q>encodé à partir d'un facsimilé de la
                première édition produit au CESR, Tours</q>)</item>
            <item>Enlevez toute la partie proposée par défaut pour le <gi>body</gi> (mais retenez
              les balises <gi>body</gi> et <gi>/body</gi>). </item>
            
          </list>
        </p>
      </div>
      
      <div>
        <head>Ajout de texte au document</head>
        <p>Rien ne vous empêche de taper à la main tout le poème directement. Mais pour gagner du
          temps on vous propose la démarche suivante : <list>
            <item>Assurez-vous que le curseur soit toujours entre les deux balises <gi>body</gi> et
              <gi>/body</gi> de votre document vide</item>
            <item>Dans le menu <ident>Document</ident>, sélectionnez <ident>Fichier</ident>, et
              ensuite <ident>Insèrer un fichier</ident>
              </item>
            <item>Naviguez jusqu'au fichier <ident>duBellay.txt</ident> dans le dossier
              <ident>Travaux</ident> qui devrait se trouver sur votre Bureau, et insérez-le. Ce
              fichier est aussi disponible sur le web, <ref
                target="http://tei.oucs.ox.ac.uk/Oxford/2010-01-tours/duBellay/sonnet.txt">à cet
                URL</ref> )</item>
          </list>
        </p>
      </div>
      
      <div>
        <head>Attention, Will Robinson !</head>
        
        <p>Votre document est rempli de taches rouges! </p>
        <p>
          <graphic height="5cm" url="../Graphics/Oxy12/amp-error.png"/>
        </p>
        <p>On va régler cela petit à petit. Commençons avec la partie la plus sérieuse : où le texte
          lui-même est affiché en rouge.</p>
        <list>
          <item>Oxygen vous indique que la partie en rouge n'est pas bien formée</item>
          <item>Il y a un message en bas de l'écran qui vous aidera (un peu) à identifier le
            problème. Sauriez vous comment le résoudre ?</item>
          <item>Conseil : souvenez-vous du fait que l'esperluette est un caractère magique en XML,
            qui doit donc être représentée de manière indirecte.</item>
        </list>
      </div>
      
      <div>
        <head>Structuration du document</head>
        <p>Il est possible d'identifier dans ce document plusieurs sous-parties. En particulier, il
          contient : <list>
            <item>un titre ... à baliser avec la balise <gi>head</gi></item>
            <item>quatre strophes ... à baliser avec la balise <gi>lg</gi></item>
            <item>des vers ... à baliser avec la balise <gi>l</gi></item>
            <item>une citation d'Horace ... à baliser avec la balise <gi>quotte</gi>
            </item>
          </list> Allons-y !</p>
        
        
        <list>
          <item>Avec la souris, sélectionnez les quatre premières lignes du document <q>À
            l'ambitieux et avare ... sonnet </q>; ceux-ci constituent son titre.</item>
          <item>Tapez CTRL-E (ou sélectionnez <ident> XML Refactoring</ident> et ensuite
            <ident>Entourer des balises</ident> dans le menu <ident>Document</ident></item>
          <item>Oxygen vous propose toutes les balises disponibles à cet emplacement.</item>
          <item>Sélectionnez <gi>head</gi> et cliquez <ident>Accepter</ident></item>
          <item><graphic height="4cm" url="../Graphics/Oxy12/head-1.png"/></item>
          <item>Ce sonnet est bicéphale : coupez en deux parties le <gi>head</gi> existant.. La
            première partie est le titre. La seconde partie est le mot sonnet. Chacune de ces deux
            parties devrait-être balisée avec un <gi>head</gi> au début et à la fin, en vous plaçant
            avant ou après le mot <q>Sonnet</q> et en vous servant de CTRL-ALT-D ou d'une autre manière
            comme lors du premier exercice.</item>
        </list>
      </div>
      
      <div>
        <head>Balisage du poème</head>
        <p>Enfin, il faut travailler un peu sur l'étiquetage du poème lui-même. Notre but serait de
          baliser chaque vers, se servant de la balise TEI <gi>l</gi> (<q>line</q>) et en amont de
          baliser chaque ensemble de vers constituant une strophe avec la balise TEI <gi>lg</gi>. </p>
        <p>Bien sur, il y a plusieurs manières de faire. On va vous décrire une méthode assez
          rapide, mais si vous préfériez une autre démarche, on n'insiste pas ! <list>
            <item>Sélectionnez avec la souris tout le texte du poème, jusqu'à la citation d'Horace
              <q>caelo musa beat</q>. </item>
            <item>Entourez toute le poème d'une balise <gi>l</gi>. </item>
            <item>Entourez la citation d'Horace d'une balise <gi>quote</gi></item>
            <item>Le petit carré vert apparaît ! Avons-nous terminé ? Hélas non : un document peut
              être valide, tout en contenant des mensonges ! Voyez-vous des mensonges ? Cliquez sur
              le bouton Indentation (ou tapez CTRL-SHIFT-P). </item>
          </list>
          <graphic height="3cm" url="../2011-02-aix/ambitieux-2.png"/></p>
        <p>Parce qu'elles ne sont pas explicités par le balisage, la distinction entre chaque vers
          et entre chaque strophe ne sont plus affichées. Il fait donc les baliser. (Si vous ne
          voyez pas bien où indiquer ces séparations, vous pouvez ré-établir l'affichage originel en
          tapant CTRL-Z) </p>
        <list>
          <item>Mettez le curseur au début de chaque vers, et distinguez-le du précédent, en vous
            servant du bouton <ident>division</ident> ou en tapant ALT-SHIFT-D </item>
          <item>Si cela vous semble plus rapide, vous pouvez aussi <q>tricher</q> : copiez la
            séquence <code>&lt;/l>&lt;l></code>, et collez-la au commencement de chaque vers.</item>
          <item>Quand vous aurez fini, cliquez encore sur le bouton Indentation. Ou sont les
            strophes ?</item>
          <item>Entourez tous les vers (tous les <gi>l</gi>) avec une balise <gi>lg</gi>.</item>
          <item>Divisez cette strophe unique en quatre strophes distinctes. Attention : il faut
            effectuer cette distinction au bon endroit — entre la fin d’un vers et le début du
            suivant, (i.e. après une balise fermante et avant une balise ouvrante). </item>
        </list>
      </div>
      
      <div>
        <head>Affichage du texte balisé</head>
        <p>Est-ce que la disparition graduelle de notre beau sonnet au dessus d'un nuage de balises
          commence à vous inquiéter un peu ? Cela nous permet au moins de visualiser la structure
          émergeante du sonnet -- regardez par exemple dans la fenêtre <q>Sommaire</q> à gauche
          :</p>
        <p><graphic height="4cm" url="../Graphics/Oxy12/sommaire-1.png"/></p>
        
        <p>Pour contrôler l'affichage d'un text balisé, il faut préciser comment nous désirons
          visualiser chaque balise. Ces précisions se font avec ce qu'on appelle une <term>feuille
            de style</term>.</p>
        <list>
          <item>Sélectionnez <ident>XML Document</ident> et ensuite <ident>Associer une feuille de
            style</ident> à partir du menu <ident>Document</ident>. </item>
          <item>Naviguez jusqu'au fichier <ident>duBellay.css</ident> dans le dossier
            <ident>Travaux</ident> qui devrait se trouver sur votre Bureau, et associez-le (ce
            fichier est aussi disponible à l'URL <ref
              target="http://tei.oucs.ox.ac.uk/Oxford/2011-02-aix/Travaux/duBellay.css">sur le
              web</ref> ).</item>
          <item>Notez qu'une ligne contenant un "processing instruction" est ajouté au début de
            votre document.</item>
          <item>Contrôlez l'effet sur l'affichage de votre document au mode Auteur.</item>
        </list>
        <p>On peut changer cet affichage. Ouvrez le fichier <ident>duBellay.css</ident> avec Oxygen
          et modifiez-le, si cela vous intéresse. Mais il y a des limites : <list>
            <item>CSS n'est pas un langage XML, et ne permet que de modifier l'affichage du contenu
              d'un document XML.</item>
            <item>On peut changer la taille de police, l'étendu des marges, les couleurs etc.</item>
            <item>Changez la couleur du titre de <code>red</code> en <code>purple.</code></item>
          </list>
        </p>
        
        <p>Des transformations beaucoup plus intéressantes sont possibles avec un autre langage de
          feuille de style : le XSLT. On verra cela prochainement...</p>
        
      </div>
 </div>     
      
</body>
  </text>
</TEI>
